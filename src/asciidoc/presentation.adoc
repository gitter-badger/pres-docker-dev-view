= DOCKER - Eine Einführung...
:imagesdir: images
:icons:


== ...aus Sicht eines Softwareentwicklers

image::ollin.2013.340x268p.png["Oliver Nautsch",float="right", link="http://www.nautsch.com/"]
_Oliver Nautsch_

* Inventage AG
* ab 2015 selbsständig

_Software Craftsman_ 

 * Engineer, Coach, Architect, Trainer, Team Lead, Consultant, Gardener, ...
 * Microservices, Open Source, TDD, DDD, CD, Virtualisierung, ...


'''

email:      oliver.nautsch@gmail.com +
twitter:    https://twitter.com/ollispieps[@ollispieps] +
github:     https://github.com/ollin[@ollin] +
google+:     https://plus.google.com/+OliverNautsch/[OliverNautsch] +


'''

Jugs Board Member seit 2014 +
http://www.ossanschulen.ch/[OSS an Schulen] +
#. . . running . . .#

== Was ist Docker

image::docker.png["docker",float="right", link="http://www.docker.com/"]

* Open Source Software
* Applikationen in Software Containern
* OS-Level Virtualisierung auf Linux

== Unterschied zu virtuellen Maschinen

image::container-vs-vm.png[caption="Quelle: https://www.docker.com/whatisdocker/", alt="Unterschied zu VM's"]

* Beispiel: virtualbox via https://www.vagrantup.com/[Vagrant] vs docker

== Docker Elemente

image::dockerstory.png["usability over functionality", float="right"]

* https://hub.docker.com/[Docker Hub] ist eine Registry für Images
* Docker Engine
    ** Docker Daemon ( https://docs.docker.com/reference/api/docker_remote_api/[REST API] )
    ** Docker CLI
* Image
    ** Layers (wie git commits or changesets für ein Dateisystem)
    ** ein Parent
* Container
    ** rw

== Docker Techniken

image::docker-filesystems-multilayer.png[caption="Quelle: https://docs.docker.com/terms/layer/#layer", alt="Layers", float="right", width=400]

* cgroups - control groups - Linux Kernel Funktion zum begrenzen, messen und isolieren von
  Ressourcen (CPU, Speicher, disc I/O etc.)
* kernel namespaces - trennen der Sichtbarkeit von Ressourcen
  in anderen Gruppen (Prozesse, Netzwerk, user IDs, Dateisysteme, etc.)
* Overlay-Dateisystem (AuFS oder Btrfs)

== Running a Container

[source, bash]
----
sudo docker run --rm -i -t ubuntu:14.04.1 bash
root@35d2e9236656:/# exit
sudo docker ps -a
----

* _docker_ - das CLI
* _run_ - erzeugt einen Container und startet ihn
* _--rm_ - entfernt den Container wieder, wenn er beendet wird
* _-i_ - interactive / STDIN bleibt offen
* _-t_ - Terminal
* _ubuntu:14.04.1_ - <repo_name>[:<tag>] , repo_name - [<location>/][<user>/]<name>
    ** Beispiele:
        *** `myrepo.nautsch.ch:12345/nautsch/myimage:1.0`
        *** `ubuntu`
* _bash_ - der auszuführende Befehl

== Erzeugen eines Images - via commit

[source, bash]
----
sudo docker run -t -i  ubuntu:14.04.1 bash
root@dcde95ca3e5c:/# touch huschihops.txt
root@dcde95ca3e5c:/# exit
sudo docker ps -a
sudo docker commit -m="added huschihops.txt" -a="Oliver Nautsch" dcde95ca3e5c ollin/huschihops:1.0
----

== . . . - via Dockerfile

[source, txt]
----
FROM ubuntu:14.04.1
MAINTAINER Oliver Nautsch <oliver.nautsch@gmail.com>

RUN touch huschihops.txt
----
[source, bash]
----
sudo docker build -t ollin/huschihops:2.0 .
Sending build context to Docker daemon  2.56 kB
Sending build context to Docker daemon
Step 0 : FROM ubuntu:14.04.1
 ---> c4ff7513909d
 Step 1 : MAINTAINER Oliver Nautsch <oliver.nautsch@gmail.com>
  ---> Using cache
   ---> 98658a58fa03
   Step 2 : RUN touch huschihops.txt
    ---> Running in 2d4d554cbf2a
     ---> 01ee073272ec
     Removing intermediate container 2d4d554cbf2a
     Successfully built 01ee073272ec

     sudo docker images
     REPOSITORY                       TAG                   IMAGE ID            CREATED             VIRTUAL SIZE
     ollin/huschihops                 1.0                   01ee073272ec        31 seconds ago      225.4 MB
     . . .
----

== Docker - weitere Themen

* https://docs.docker.com/[Docker Documentation]
* https://coreos.com/[CoreOs - Linux for Massive Server Deployments]
* http://www.projectatomic.io/[Project Atomic - Deploy and Manage Your Docker Containers.]
* https://github.com/GoogleCloudPlatform/kubernetes[Kubernetes - Container Cluster Managmement]
* . . .

